<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title></title>
		<style type="text/css">
			* {
				margin: 0;
			}
			div {
				width: 100vw;
				height: 100vh;
				background-color: red;
				font: bold 300px/100vh "微软雅黑";
				text-align: center;
			}
		</style>
	</head>
	<body>
		<div id="div">1%</div>
		<!--src 先用占位符填充-->
		<img id="img" src="img/placeholder" date-src="img/h3.png"/>
	</body>
	<script type="text/javascript">
//		var body = document.getElementsByTagName("body")[0];
		var div = document.all.div;
		var img = document.all.img;
		var timer = null;
		var count = 1;
		var total = 100;
		timer = setInterval(function(){
			count+=random();
			if(count>=total){
				count = 100;
				clearInterval(timer);
			}
			div.innerHTML = count + "%";
			//模拟图片下载完毕，操作对应函数
			if(count == 100){
				//document.write("1111");
				anything();
			}
		},30);
		
		function random(){
			return parseInt(Math.random()*(5 - 1 + 1))+1;
		}
		//处理图片下载完毕后的事情
		function anything() {
			//1.把div消掉
			//2.把图片显示出来
			var divp = div.parentNode;
			divp.removeChild(div);
			var a = img.getAttribute("date-src");
			//console.log(a)
			img.setAttribute("src",a);
			//var b = img.getAttribute("src");
			//console.log(b)
		}
	</script>
</html>
