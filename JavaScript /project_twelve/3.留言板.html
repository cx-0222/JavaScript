<!DOCTYPE html>
<html>

	<head>
		<meta charset="UTF-8">
		<title>留言板</title>
		<style type="text/css">
			* {
				margin: 0;
				padding: 0;
			}
			
			.warp {
				width: 600px;
				height: 165px;
				margin: 20px auto;
				border-radius: 4px;
				border: 1px solid #ddd;
				padding: 0 10px;
			}
			
			.warp-head {
				width: 100%;
				height: 24px;
				padding-top: 4px;
				overflow: hidden;
			}
			
			.head-logo {
				width: 40%;
				float: left;
			}
			
			.head-logo> img {
				width: 30px;
				height: 30px;
			}
			
			.head-txt {
				padding: 4px 0;
				width: 60%;
				float: right;
			}
			
			.head-using {
				text-align: right;
				font-size: 13px;
				color: #ccc;
			}
			
			.head-txt a {
				font-size: 12px;
				color: #eb7350;
				text-decoration: none;
			}
			
			.main-txt {
				border: 1px solid #ccc;
				width: 98%;
				height: 68px;
				margin: 4px 0 0;
				padding: 5px;
				box-shadow: 0px 0px 3px 0px rgba(0, 0, 0, 0.15) inset;
			}
			
			.clicked {
				border: 1px solid #eb7350;
				box-shadow: none;
			}
			
			.main-txt textarea {
				border: none;
				width: 100%;
				height: 66px;
				outline: none;
				resize: none;
				color: #333;
			}
			
			.warp-footer {
				width: 100%;
				height: 40px;
				margin: 6px 0;
				overflow: hidden;
			}
			
			.warp-icon-cont {
				width: 65%;
				float: left;
				margin-top: 10px;
			}
			
			.warp-icon-cont ul li {
				display: inline-block;
				margin-right: 15px;
				cursor: pointer;
			}
			
			.warp-icon-cont a {
				font-size: 12px;
				color: #333;
				text-decoration: none;
				height: 20px;
				margin-left: 5px;
				display: block;
				width: 25px;
				float: right;
				line-height: 20px;
			}
			
			.warp-icon-cont a:hover {
				color: #eb7350;
			}
			
			.warp-icon-cont img {
				width: 20px;
				height: 20px;
			}
			
			.warp-footer-btns {
				width: 35%;
				float: right;
				overflow: hidden;
				margin-top: 3px;
			}
			
			.release-btn {
				width: 80px;
				height: 28px;
				float: right;
				background-color: #ffc09f;
				border: 4px solid #fbbd9e;
				cursor: pointer;
				border-radius: 2px;
			}
			
			.release-btn a {
				display: block;
				color: #fff;
				width: 80px;
				height: 28px;
				line-height: 28px;
				text-align: center;
				text-decoration: none;
				font-size: 15px;
			}
			
			.btn-active {
				border: 1px solid #f77c3d;
				background-color: #ff8140;
			}
			
			.txt-beyond {
				color: red;
				text-align: right;
				font-size: 13px;
			}
			
			.show {
				width: 600px;
				margin: 20px auto;
			}
			
			.show-content {
				width: 578px;
				border: 1px solid #ccc;
				border-radius: 4px;
				margin-bottom: 10px;
				padding: 10px;
				position: relative;
				overflow: hidden;
			}
			
			.show-name {
				width: 100%;
				text-align: left;
				font-size: 14px;
				color: #333;
				font-weight: bold;
			}
			
			.show-txt {
				width: 100%;
				color: #444;
				font-size: 14px;
				margin-top: 10px;
			}
			
			.show-txt p {
				width: 100%;
				word-wrap: break-word;
			}
			
			.show-time {
				font-size: 12px;
				color: #808080;
				margin-top: 10px;
			}
			
			.show-close {
				position: absolute;
				top: 10px;
				right: 10px;
				font-size: 12px;
				color: #ccc;
				cursor: pointer;
				-webkit-transition: all .5s;
				transition: all .5s;
			}
			
			.show-close:hover {
				color: red;
			}
			
			.main-txt.outline {
				outline: 2px orange solid;
			}
			
			.head-txt .title {
				text-align: right;
				color: #CCCCCC;
				display: block;
				width: 100%;
			}
		</style>
	</head>

	<body>
		<div class="warp">
			<div class="warp-head">
				<div class="head-logo">
					<img src="img/xx.png" />
				</div>
				<div class="head-txt" id="headTxt">
					<a id="title-txt" href="javascript:void(0)">置办年货省省省！红包在手年货无忧！点击领取年货红包&nbsp;&nbsp;&nbsp;热门微博</a>
				</div>
			</div>
			<div class="main-txt" id="mainTxt">
				<textarea name="" rows="" cols="" id="mainArea"></textarea>
			</div>
			<div class="warp-footer">
				<div class="warp-icon-cont">
					<ul>
						<li><img src="img/wb1.png" alt="" />
							<a href="javascript:void(0)">表情</a>
						</li>
						<li><img src="img/wb2.png" alt="" />
							<a href="javascript:void(0)">图片</a>
						</li>
						<li><img src="img/wb3.png" alt="" />
							<a href="javascript:void(0)">视频</a>
						</li>
						<li><img src="img/wb4.png" alt="" />
							<a href="javascript:void(0)">话题</a>
						</li>
						<li><img src="img/wb5.png" alt="" />
							<a href="javascript:void(0)">文章</a>
						</li>
					</ul>
				</div>
				<div class="warp-footer-btns">
					<div class="release-btn" id="releaseBtn">
						<a href="javascript:void(0)">发布</a>
					</div>
				</div>
			</div>
		</div>
		<div id="show" class="show">
			<!--<div class="show-content">
				<div class="show-name">Xx</div>
				<div class="show-txt">
					<p class="">这是内容</p>
				</div>
				<div class="show-time">2016年1月1日</div>
				<div class="show-close">x</div>
			</div>-->
		</div>
	</body>
	<script src="js/tween.js" type="text/javascript" charset="utf-8"></script>
	<script type="text/javascript">
		function getEleById(eleId) {
			return document.getElementById(eleId);
		}

		//右上角红色文字
		var title = getEleById("title-txt");
		//留言框
		var mainArea = getEleById("mainArea");
		//发布按钮
		var releaseBtn = getEleById("releaseBtn");
		//留言板
		var show = getEleById("show");
		//可留言总个数
		var count = 140;
		//是否可以发布
		var isRelease = false;
		//留言框获得焦点
		mainArea.onfocus = function() {
				//console.log("获得焦点");
				//+= " outline" 是加等空格  给它再添加一个class outline
				mainArea.parentElement.className += " outline";
				title.innerHTML = "还可以输入" + count + "个字"
				title.className = "title"
			}
			//失去焦点
		mainArea.onblur = function() {
				//console.log("失去焦点");
				mainArea.parentElement.className = "main-txt";
				title.innerHTML = "置办年货省省省！红包在手年货无忧！点击领取年货红包&nbsp;&nbsp;&nbsp;热门微博"
				title.className = "";
			}
			//键盘文本输入
		mainArea.onkeyup = function() {
				//console.log(mainArea.value);
				//console.log(mainArea.value.length);
				count = 140 - mainArea.value.length;
				if(count <= 140 && count >= 0) {
					title.innerHTML = "还可以输入" + count + "个字";
					if(count != 140) {
						isRelease = true;
					} else {
						isRelease = false;
					}
				} else {
					title.innerHTML = "你已经超出" + (-count) + "个字"
					isRelease = false;
				}
				if(isRelease) {
					//console.log("点击发布");
					releaseBtn.style.backgroundColor = "orange";
					releaseBtn.style.borderColor = "orange"
				} else {
					releaseBtn.style.backgroundColor = "#ffc09f";
					releaseBtn.style.borderColor = "#ffc09f"
				}
			}
			//点击发布
		releaseBtn.onclick = function() {
			//console.log("点击发布");
			if(isRelease) {
				var showContent = createDIV(),
					showName = createDIV(),
					showTxt = createDIV(),
					showTime = createDIV(),
					showClose = createDIV(),
					showP = document.createElement("p");

				showContent.className = "show-content";
				showName.className = "show-name";
				showTxt.className = "show-txt";
				showTime.className = "show-time";
				showClose.className = "show-close";
				showTxt.appendChild(showP);
				showContent.appendChild(showName);
				showContent.appendChild(showTxt);
				showContent.appendChild(showTime);
				showContent.appendChild(showClose);
				
				showContent.style.top  = "-150px";//show还在下面 showContent在上面
				
				
				showName.innerText = "XxXx";
				showP.innerHTML = mainArea.value;
				showTime.innerHTML = "2016年1月1日";
				showClose.innerHTML = "x";
				
				if(show.children[0]){
					show.insertBefore(showContent,show.children[0]);
				}else{
					show.appendChild(showContent);
				}
				
				var timer = null;
				var t= 0;
				var d = 30;
				var b = showContent.offsetTop;
				var end = 0;
				var c = end - b;
				clearInterval(timer);
				timer = setInterval(function(){
					t++
					if(t>=d){
						clearInterval(timer);
					}
					showContent.style.top = Tween.Back.easeOut(t,b,c,d) + "px"
				},30);
				
			showClose.onclick = function(){
				var t = 0;
				var d =30;
				var b = showContent.offsetHeight;
				var c = -b;
				var closeTimer = setInterval(function(){
					t++;
					if(t>=d){
						clearInterval(closeTimer);
						show.removeChild(showContent);
					}
					showContent.style.height = Tween.Linear(t,b,c,d) + "px";
				},30);
			}
				
				mainArea.value = "";
				count = 140;
				isRelease = false;
				releaseBtn.style.backgroundColor = "#ffc09f";
				releaseBtn.style.borderColor = "#ffc09f"
			}
		}

		function createDIV() {
			return document.createElement("div");
		}
	</script>

</html>